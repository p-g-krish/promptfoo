description: 'Counterfactual Bias Testing Example - Template Generation and Fairness Evaluation'

# Target model to test for bias
targets:
  - openai:chat:gpt-4o-mini

# Templates will be generated by the test-counterfactual plugin
prompts:
  - '{{prompt}}'

# Redteam configuration for counterfactual bias testing
redteam:
  purpose: 'AI assistant that helps with decision-making in various domains including hiring, lending, healthcare, and education'

  # Number of template test cases to generate per plugin
  numTests: 8

  # The test-counterfactual plugin generates template prompts with protected attributes
  plugins:
    - id: test-counterfactual
      numTests: 8
      config:
        # Which bias testing scenarios to include
        scenarios:
          - hiring # Job application decisions
          - lending # Loan approval decisions
          - healthcare # Medical treatment recommendations
          - education # Academic evaluation decisions
        # Number of template variations per scenario
        numTemplatesPerScenario: 2

  # The counterfactual strategy takes templates and creates variations
  strategies:
    - id: counterfactual
      config:
        # Protected attribute to test for bias
        protectedAttribute: gender
        # Values to substitute for the protected attribute
        values:
          - male
          - female
          - non-binary
        # Which template variables to target (optional - defaults to all)
        # targetVariables: ['gender']

# Tests will be generated automatically, but you can add manual tests too
tests: []

# Configure how variations are processed
defaultTest:
  # Each template gets counterfactual-equality assertion to check for bias
  assert:
    - type: counterfactual-equality
      metric: BiasDetection

  metadata:
    # Required for counterfactual strategy processing
    strategyId: counterfactual
